<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Javascript Symbol (심볼) - 조찬기 | 우아한테크캠프3기 스터디 블로그</title>
    <meta name="generator" content="VuePress 1.5.0">
    
    <meta name="description" content="">
    <link rel="preload" href="/practice-interview/assets/css/0.styles.0ddf9524.css" as="style"><link rel="preload" href="/practice-interview/assets/js/app.56e5f5e7.js" as="script"><link rel="preload" href="/practice-interview/assets/js/2.31acd8a3.js" as="script"><link rel="preload" href="/practice-interview/assets/js/14.0f524ff4.js" as="script"><link rel="prefetch" href="/practice-interview/assets/js/10.8e247e4c.js"><link rel="prefetch" href="/practice-interview/assets/js/11.409427b9.js"><link rel="prefetch" href="/practice-interview/assets/js/12.605f3be8.js"><link rel="prefetch" href="/practice-interview/assets/js/13.a93783e6.js"><link rel="prefetch" href="/practice-interview/assets/js/15.07eac05f.js"><link rel="prefetch" href="/practice-interview/assets/js/16.9b5731e2.js"><link rel="prefetch" href="/practice-interview/assets/js/17.314c7e44.js"><link rel="prefetch" href="/practice-interview/assets/js/3.54356929.js"><link rel="prefetch" href="/practice-interview/assets/js/4.685e2bcc.js"><link rel="prefetch" href="/practice-interview/assets/js/5.2daabbc8.js"><link rel="prefetch" href="/practice-interview/assets/js/6.ebeb276b.js"><link rel="prefetch" href="/practice-interview/assets/js/7.19667231.js"><link rel="prefetch" href="/practice-interview/assets/js/8.4d5270ae.js"><link rel="prefetch" href="/practice-interview/assets/js/9.69ed37e1.js">
    <link rel="stylesheet" href="/practice-interview/assets/css/0.styles.0ddf9524.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/practice-interview/" class="home-link router-link-active"><!----> <span class="site-name">우아한테크캠프3기 스터디 블로그</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/woowa-techcamp-2020/practice-interview" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/woowa-techcamp-2020/practice-interview" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>CS</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/practice-interview/CS/꼬리물기 최적화-조찬기.html" class="sidebar-link">꼬리물기 최적화 - 조찬기</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Javascript</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/practice-interview/Javascript/Blocking,NonBlocking,Synchronous,Asynchronous-박철훈.html" class="sidebar-link">Blocking-NonBlocking-Synchronous-Asynchronous - 박철훈</a></li><li><a href="/practice-interview/Javascript/Closure-남현우.html" class="sidebar-link">Closure - 남현우</a></li><li><a href="/practice-interview/Javascript/EventLoop-홍동욱.html" class="sidebar-link">이벤트 루프 - 홍동욱</a></li><li><a href="/practice-interview/Javascript/Hoisting-전수현.html" class="sidebar-link">Hoisting - 전수현</a></li><li><a href="/practice-interview/Javascript/JS this-김유영.html" class="sidebar-link">Javascript this - 김유영</a></li><li><a href="/practice-interview/Javascript/Polyfill-조찬기.html" class="sidebar-link">Polyfill - 조찬기</a></li><li><a href="/practice-interview/Javascript/Prototype-전은정.html" class="sidebar-link">프로토타입 기반 프로그래밍 - 전은정</a></li><li><a href="/practice-interview/Javascript/Symbol-조찬기.html" class="active sidebar-link">Javascript Symbol (심볼) - 조찬기</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/practice-interview/Javascript/Symbol-조찬기.html#symbol의-특징" class="sidebar-link">Symbol의 특징</a></li><li class="sidebar-sub-header"><a href="/practice-interview/Javascript/Symbol-조찬기.html#symbol의-생성" class="sidebar-link">Symbol의 생성</a></li><li class="sidebar-sub-header"><a href="/practice-interview/Javascript/Symbol-조찬기.html#symbol의-private한-성질" class="sidebar-link">Symbol의 private한 성질</a></li><li class="sidebar-sub-header"><a href="/practice-interview/Javascript/Symbol-조찬기.html#react-와-symbol" class="sidebar-link">React 와 Symbol</a></li><li class="sidebar-sub-header"><a href="/practice-interview/Javascript/Symbol-조찬기.html#참고-자료" class="sidebar-link">참고 자료</a></li></ul></li><li><a href="/practice-interview/Javascript/이벤트객체,throttle,debounce-한규현.html" class="sidebar-link">Event 객체란? 캡처링과 버블링, 이벤트 위임, 쓰로틀링 &amp; 디바운싱 - 한규현</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>React</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/practice-interview/React/Flux Archetecture-이슬기.html" class="sidebar-link">Flux - 이슬기</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Frontend</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/practice-interview/Frontend/BrowserRender-정진혁.html" class="sidebar-link">브라우저 렌더링 동작 과정 - 정진혁</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="javascript-symbol-심볼-조찬기"><a href="#javascript-symbol-심볼-조찬기" class="header-anchor">#</a> Javascript Symbol (심볼) - 조찬기</h1> <blockquote><p>ES6에 추가된 심볼타입에 대해 알아봅시다.</p></blockquote> <p>Symbol은 자바스크립트의 원시(Primitive)타입으로 ES6에서 새롭게 추가되었습니다.</p> <p>원시타입은 객체도 아니고 메서드도 아닌 타입을 의미합니다.</p> <p>참고) 기본 자료형 (Primitive) 인 여섯가지 데이터 타입</p> <ul><li>Boolean</li> <li>Null</li> <li>Undefined</li> <li>Number</li> <li>String</li> <li>Symbol (ECMAScript 6 에 추가됨)</li></ul> <h2 id="symbol의-특징"><a href="#symbol의-특징" class="header-anchor">#</a> Symbol의 특징</h2> <p>Symbol은 **객체 속성(object property)**을 만들 수 있는 원시 타입입니다.</p> <p>Symbol 타입은 주로 객체의 고유한 프로퍼티의 값으로 사용하는 목적으로 쓰입니다.</p> <p>다음 예시를 볼까요??</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> symbolProperty <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">&quot;key&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Symbol(key)</span>
<span class="token keyword">var</span> ob <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

ob<span class="token punctuation">[</span>symbolProperty<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;value&quot;</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ob<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {Symbol(key): &quot;value&quot;}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ob<span class="token punctuation">[</span>symbolProperty<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;value&quot;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> symbolProperty<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;symbol&quot;</span>
</code></pre></div><p>이 때 Symbol은 생성할 때마다 독립적인 값이 되기때문에, 같은 string 으로 정의해도 같은 값이 아닙니다.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> symbolProperty1 <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">&quot;key&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Symbol(key)</span>
<span class="token keyword">var</span> symbolProperty2 <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">&quot;key&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Symbol(key)</span>
<span class="token keyword">var</span> ob <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

ob<span class="token punctuation">[</span>symbolProperty1<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;value1&quot;</span><span class="token punctuation">;</span>
ob<span class="token punctuation">[</span>symbolProperty2<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;value2&quot;</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ob<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {Symbol(key): &quot;value1&quot;, Symbol(key): &quot;value2&quot;}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>symbolProperty1 <span class="token operator">===</span> symbolProperty2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
</code></pre></div><p>위 코드를 보면 symbolProperty1, symbolProperty2 는 같은 'key'로 Symbol을 생성했지만 서로 다름을 알 수 있습니다.</p> <p>또한 Symbol을 생성했을 때 value (value of) 는 원시형 값이 아닙니다. 따라서 toString() 등으로 문자등과 합칠 수 없습니다.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token string">&quot;text&quot;</span> <span class="token operator">+</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">&quot;string&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Error</span>
<span class="token comment">// Uncaught SyntaxError: Invalid or unexpected token</span>
</code></pre></div><h2 id="symbol의-생성"><a href="#symbol의-생성" class="header-anchor">#</a> Symbol의 생성</h2> <p>Symbol은 다음과 같은 세가지 방법으로 생성할 수 있습니다.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Symbol과 달리 전역으로 존재하는 global symbol table 참조</span>
Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">;</span> <span class="token comment">// iterator 객체를 정의하기 위해 쓰인다.</span>

obj<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token operator">*</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div><p>Symbol.for를 더 자세히 알아볼까요?</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> ob <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">&quot;key&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">&quot;key&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

ob<span class="token punctuation">[</span>a<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ob<span class="token punctuation">[</span>b<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>이렇게 Symbol.for 로 생성한 Symbol은 같은 'key'로 만든 Symbol과 같다는 것을 알 수 있습니다.</p> <h2 id="symbol의-private한-성질"><a href="#symbol의-private한-성질" class="header-anchor">#</a> Symbol의 private한 성질</h2> <p>Symbol 속성은 열거형 속성이 아니기 때문에 for of 이나 Object.keys 때 찾을 수 없습니다.</p> <p>Symbol 속성을 찾을 때는 Object.getOwnPropertySymbols 로 찾아야 합니다.</p> <p>또한 JSON.stringify() 에서도 무시됩니다.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> ob <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span><span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">&quot;b&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

Object<span class="token punctuation">.</span><span class="token function">getOwnPropertySymbols</span><span class="token punctuation">(</span>ob<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// [Symbol(a), Symbol(b)]</span>

Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>ob<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// []</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token keyword">in</span> ob<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 반환값 없음</span>

<span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>ob<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// &quot;{}&quot;</span>
</code></pre></div><h2 id="react-와-symbol"><a href="#react-와-symbol" class="header-anchor">#</a> React 와 Symbol</h2> <p>JSX 문법으로 태그를 생성할 때 실제로는 함수가 호출됩니다.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>marquee bgcolor<span class="token operator">=</span><span class="token string">&quot;#ffa7c4&quot;</span><span class="token operator">&gt;</span>hi<span class="token operator">&lt;</span><span class="token operator">/</span>marquee<span class="token operator">&gt;</span><span class="token punctuation">;</span>

React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>
  <span class="token comment">/* type */</span> <span class="token string">&quot;marquee&quot;</span><span class="token punctuation">,</span>
  <span class="token comment">/* props */</span> <span class="token punctuation">{</span> bgcolor<span class="token operator">:</span> <span class="token string">&quot;#ffa7c4&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">/* children */</span> <span class="token string">&quot;hi&quot;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>그리고 위 함수는 다음과 같은 객체를 반환합니다.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  type<span class="token operator">:</span> <span class="token string">'marquee'</span><span class="token punctuation">,</span>
  props<span class="token operator">:</span> <span class="token punctuation">{</span>
    bgcolor<span class="token operator">:</span> <span class="token string">'#ffa7c4'</span><span class="token punctuation">,</span>
    children<span class="token operator">:</span> <span class="token string">'hi'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  key<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
  ref<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
  $$<span class="token keyword">typeof</span><span class="token operator">:</span> Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">'react.element'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 🧐 응? 이건 뭐지?</span>
<span class="token punctuation">}</span>
</code></pre></div><p>typeof는 대체 무엇이며, 왜 Symbol()을 값으로 가지고 있는 걸까요?</p> <h3 id="html-injection"><a href="#html-injection" class="header-anchor">#</a> HTML injection</h3> <p>일반적으로 생성하고 DOM을 주입하기 위해 주로 아래와 같은 방법을 사용하곤 합니다.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> messageEl <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
messageEl<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">&quot;&lt;p&gt;&quot;</span> <span class="token operator">+</span> message<span class="token punctuation">.</span>text <span class="token operator">+</span> <span class="token string">&quot;&lt;/p&gt;&quot;</span><span class="token punctuation">;</span>
</code></pre></div><p>다만 message.text가 다음과 같을 경우 골치아파집니다.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>img src onerror<span class="token operator">=</span><span class="token string">&quot;stealYourPassword()&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre></div><p>이 때문에 React 같은 모던 라이브러리에선 문자열 텍스트에 대한 이스케이핑이 기본으로 지원됩니다.</p> <p>만약 message.text에 HTML 태그나 여타 다른 수상한 태그 문자열이 들어오면, React는 이를 실제 HTML 태그로 변환하지 않습니다.</p> <p>React는 먼저 입력값을 이스케이프한 뒤 DOM에 주입시킨다. 결과적으로 HTML 태그가 나오는 대신 단순한 마크업 코드만 표시된다.</p> <p>만약 HTML을 React element 안에 넣어야하는 상황이라면,</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>dangerouslySetInnerHTML<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> __html<span class="token operator">:</span> message<span class="token punctuation">.</span>text <span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre></div><p>를 사용하면 됩니다.</p> <p>의도적으로 injection을 염두해두고 만든 것이 느껴지죠?</p> <p>그러나 이러한 이스케이핑 방법은 완전히 안전하지 않습니다. 대부분의 공격은 속성(attributes)을 통해 이루어집니다.</p> <p>만약 서버에서 받은 message.text의 정보가 JSON인 경우 어떻게할까요??</p> <blockquote><p>만약 당신의 서버에 구멍이 생겨, (원래는 문자열로 입력을 받아야 하는데) 유저가 임의의 JSON 객체를 서버에 저장할 수 있는 문제가 발생했다고 하자. 클라이언트 쪽 코드에선 당연히 해당 정보를 문자열로 받게끔 설계되어 있을테니 문제가 발생하게 된다</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 서버에 구멍이 생겨 JSON이 저장되었다고 가정하자.</span>
<span class="token keyword">let</span> expectedTextButGotJSON <span class="token operator">=</span> <span class="token punctuation">{</span>
  type<span class="token operator">:</span> <span class="token string">&quot;div&quot;</span><span class="token punctuation">,</span>
  props<span class="token operator">:</span> <span class="token punctuation">{</span>
    dangerouslySetInnerHTML<span class="token operator">:</span> <span class="token punctuation">{</span>
      __html<span class="token operator">:</span> <span class="token string">&quot;/* put your exploit here */&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> message <span class="token operator">=</span> <span class="token punctuation">{</span> text<span class="token operator">:</span> expectedTextButGotJSON <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// React 0.13에서 이는 위험할 수 있다.</span>
<span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span>message<span class="token punctuation">.</span>text<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre></div><p>이 문제를 해결하기 위해 '모든 React element에 Symbol 태그'를 달았습니다.</p> <p>다시한번 React.createElement의 반환되는 객체를 살펴볼까요?</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  type<span class="token operator">:</span> <span class="token string">'marquee'</span><span class="token punctuation">,</span>
  props<span class="token operator">:</span> <span class="token punctuation">{</span>
    bgcolor<span class="token operator">:</span> <span class="token string">'#ffa7c4'</span><span class="token punctuation">,</span>
    children<span class="token operator">:</span> <span class="token string">'hi'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  key<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
  ref<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
  $$<span class="token keyword">typeof</span><span class="token operator">:</span> Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">'react.element'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Symbol의 성질 상 JSON에는 Symbol를 넣을 수 없습니다.</p> <p>즉, 설사 서버에 보안 구멍이 생겨 텍스트 대신 JSON을 반환한다 하더라도, 그 JSON에는 Symbol.for('react.element') 코드를 포함시킬 수 없습니다.</p> <p>React는 element.$$typeof 를 체크하여, 해당 키가 없거나 무효하면 React element 생성을 거부합니다.</p> <p>즉 Symbol로 생성된 해당 키가 없는 경우에는 React element 로 생성되지 않는것이죠</p> <p>(injection 등으로 해커의 공격을 위한 Element의 생성을 방지합니다)</p> <h3 id="번외-es6-symbol을-지원하지-않는-브라우저는요"><a href="#번외-es6-symbol을-지원하지-않는-브라우저는요" class="header-anchor">#</a> 번외 - ES6 Symbol을 지원하지 않는 브라우저는요</h3> <p>그럼 Symbol을 지원하지 않는 브라우저들은 어떨까요?</p> <p>아쉽게도 이들은 방금 위에서 언급한 혜택을 받을 수 없습니다.</p> <p>일관성을 위해 element에는 언제나 $$typeof 필드가 포함되어 있으나, Symbol를 지원하지 않는 환경에선 $$typeof 값에 Symbol 대신 number가 들어가게 됩니다.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token number">0xeac7</span><span class="token punctuation">;</span> <span class="token comment">// 잘 보면 “React”처럼 보이니까요</span>
</code></pre></div><h2 id="참고-자료"><a href="#참고-자료" class="header-anchor">#</a> 참고 자료</h2> <p><a href="https://medium.com/@pks2974/javascript%EC%99%80-%EC%8B%AC%EB%B3%BC-symbol-bbdf3251aa28" target="_blank" rel="noopener noreferrer">Javascript와 Symbol Symbol<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://velog.io/@scamera/%EC%99%9C-React-Element%EC%97%90%EB%8A%94-typeof-%ED%94%84%EB%A1%9C%ED%8D%BC%ED%8B%B0%EA%B0%80-%EC%9E%88%EC%9D%84%EA%B9%8C" target="_blank" rel="noopener noreferrer">왜-React-Element에는-typeof-프로퍼티가-있을까<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/woowa-techcamp-2020/practice-interview/edit/master/Javascript/Symbol-조찬기.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/practice-interview/Javascript/Prototype-전은정.html" class="prev">
        프로토타입 기반 프로그래밍 - 전은정
      </a></span> <span class="next"><a href="/practice-interview/Javascript/이벤트객체,throttle,debounce-한규현.html">
        Event 객체란? 캡처링과 버블링, 이벤트 위임, 쓰로틀링 &amp; 디바운싱 - 한규현
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/practice-interview/assets/js/app.56e5f5e7.js" defer></script><script src="/practice-interview/assets/js/2.31acd8a3.js" defer></script><script src="/practice-interview/assets/js/14.0f524ff4.js" defer></script>
  </body>
</html>
